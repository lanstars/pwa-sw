!function(a,b){function c(){i.DEBUG&&void 0}function d(){i.DEBUG&&void 0}function e(a,b){return function(d,e,f){return c("Cache Strategy:",a&&a.name||"custom","["+d.url+"]"),b.call(null,d,e,f,a)}}function f(a){if(c("[ERROR]:use fallback!"),"GET"===a.method){var b=a.headers.get("accept");if(b.includes("text/html"))return caches.open(i.CACHE_BASIC).then(function(a){return a.match(new Request(i.OFFLINE_PAGE))})}}function g(a,b,c,e){return e.apply(null,arguments)["catch"](function(){return d("[ERROR]: load :"+a.url+" error"),f(a,b,c)})}function h(a,b,c,e){return e.apply(null,arguments)["catch"](function(){d("[ERROR]:load res:"+a.url+" error")})}var i=a.CONFIG||{};i.OFFLINE_PAGE=i.OFFLINE_PAGE||i.PAGE_OFFLINE,i.OFFLINE_IMG="",i.ORIGIN=self.location.origin,i.CACHE_STATIC=i.APP_NAME+":"+i.VERSION+":STATIC",i.CACHE_BASIC=i.APP_NAME+":"+i.VERSION+":BASIC",i.CACHE_BASIC_PRODUCT=i.APP_NAME+":"+i.VERSION+":BASIC:PRODUCT",i.CACHE_BASIC_SEARCH=i.APP_NAME+":"+i.VERSION+":BASIC:SEARCH",i.CACHE_BASIC_CATEGORY=i.APP_NAME+":"+i.VERSION+":BASIC:CATEGORY",b.options.debug=i.DEBUG,self.addEventListener("activate",function(a){return caches.keys().then(function(a){return Promise.all(a.map(function(a){return a.indexOf(i.VERSION)<0?caches["delete"](a):void 0}))}),self.clients.claim()}),self.addEventListener("install",function(a){caches.open(i.CACHE_STATIC).then(function(a){return a.addAll(cacheForStatic).then(function(){})}),caches.open(i.CACHE_BASIC).then(function(a){return a.addAll(cacheForBasic)}),a.waitUntil(caches.open(i.CACHE_BASIC).then(function(a){return a.add(i.PAGE_OFFLINE).then(function(){self.skipWaiting()})}))}),i.DISABLE!==!0&&(self.addEventListener("fetch",function(a){if("GET"===a.request.method){var b=a.request,c=a.request.url;0===c.indexOf(self.location.origin)&&"navigate"===b.mode&&a.respondWith(fetch(b.clone())["catch"](function(){return caches.open(i.CACHE_BASIC).then(function(a){return a.match(i.OFFLINE_PAGE)})}))}}),b.router.get("/(.*)",e(b.cacheFirst,h),{cache:{name:i.CACHE_STATIC},successResponses:/^0|([12]\d\d)$/,origin:/^https:\/\/st-en.jd.com$/}),b.router.get("/search/result/list(.*)",e(b.fastest,g),{cache:{name:i.CACHE_BASIC_SEARCH,maxAgeSeconds:36e3,maxEntries:50},successResponses:/^0|([12]\d\d)$/,origin:new RegExp("^"+i.ORIGIN+"$")}),b.router.get("category/all(.*)",e(b.fastest,g),{cache:{name:i.CACHE_BASIC_CATEGORY,maxAgeSeconds:36e3},successResponses:/^0|([12]\d\d)$/,origin:new RegExp("^"+i.ORIGIN+"$")}),b.router.get("category/child(.*)",b.fastest,{cache:{name:i.CACHE_BASIC_CATEGORY,maxAgeSeconds:36e3},successResponses:/^0|([12]\d\d)$/,origin:new RegExp("^"+i.ORIGIN+"$")}))}(self,self.toolbox);